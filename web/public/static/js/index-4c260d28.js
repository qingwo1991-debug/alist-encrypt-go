import{e as $,D,u as B,J as j,K as O,L as T,r as i,E as G,g as V,h as x,j as f,F as I,b as r,c as l,i as o,k as t,M as J,N as K,t as w,O as Q,d as W,q as g,p as h,P as X,Q as Y,R as Z,G as ee,S as le}from"./index-b9e95577.js";import"./lodash-12555135.js";const oe={class:"scroll-y"},ae={class:"mt-30px font-bold mb-10px"},te=W({}),re=Object.assign(te,{__name:"index",setup(se){const k=g("right"),C=g(!1),_=g("encode");$(),D(),B();const d=h({folderName:"my video",encType:"aesctr",folderPasswd:"123456",folderNameEnc:"",folderEncType:"rc4",password:""}),p=h({name:"",path:"/*",describe:"",serverHost:"192.168.1.100",serverPort:"5244",https:!1,enableH2c:!1,proxyH2c:!1,passwdList:[{id:Math.random(),password:"123456",encType:"aesctr",enable:!1,encName:!1,encSuffix:"",describe:"my video",encPath:"333"}]}),E=g(),H=()=>{p.passwdList.push({id:Math.random(),password:"123456",encType:"aesctr",enable:!0,describe:"my video",encPath:"/aliyun/encrypt/*"})},F=n=>{p.passwdList.splice(n,1)},R=n=>{C.value=!0,d.password=n.password,d.encType=n.encType},S=async()=>{const n=await X(d);d.folderNameEnc=`${d.folderName}_${n.data.folderNameEnc}`},z=async()=>{const n=await Y(d);d.folderPasswd=n.data.folderPasswd,d.folderEncType=n.data.folderEncType},A=async()=>{Z(p).then(n=>{ee.success(n.msg)});try{const e=(await T()).data||{};e.enable_h2c=p.proxyH2c,await le(e)}catch(n){console.error("Failed to save proxy H2C setting:",n)}};return j(async()=>{const n=await O();for(const e of n.data.passwdList)e.id=Math.random(),e.encPath=e.encPath.reduce((m,s)=>`${m},${s}`);Object.assign(p,n.data);try{const e=await T();e.data&&(p.proxyH2c=e.data.enable_h2c||!1)}catch(e){console.error("Failed to load proxy H2C setting:",e)}}),(n,e)=>{const m=i("el-input"),s=i("el-form-item"),b=i("el-switch"),c=i("el-button"),y=i("el-radio"),N=i("el-radio-group"),v=i("el-form"),U=i("el-tab-pane"),q=i("el-tabs"),L=i("el-dialog"),M=G("lang");return V(),x("div",oe,[e[32]||(e[32]=f("h3",null,"Alist服务配置",-1)),I((V(),x("div",ae,[...e[11]||(e[11]=[r("服务地址",-1)])])),[[M]]),l(v,{ref_key:"refSearchForm",ref:E,"label-position":k.value,"label-width":"75px",model:t(p)},{default:o(()=>[l(s,{prop:"username",label:"服务器"},{default:o(()=>[l(m,{modelValue:t(p).serverHost,"onUpdate:modelValue":e[0]||(e[0]=a=>t(p).serverHost=a),style:{"max-width":"260px"},placeholder:"192.168.1.100"},null,8,["modelValue"]),e[12]||(e[12]=f("span",{color:"gray",style:{"font-size":"12px","margin-left":"12px"}},"alist的ip或者域名地址",-1))]),_:1}),l(s,{prop:"password",label:"端口"},{default:o(()=>[l(m,{modelValue:t(p).serverPort,"onUpdate:modelValue":e[1]||(e[1]=a=>t(p).serverPort=a),style:{"max-width":"260px"},placeholder:"5244"},null,8,["modelValue"])]),_:1}),l(s,{prop:"https",label:"https"},{default:o(()=>[l(b,{modelValue:t(p).https,"onUpdate:modelValue":e[2]||(e[2]=a=>t(p).https=a),class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"]),e[13]||(e[13]=f("span",{color:"gray",style:{"font-size":"12px","margin-left":"12px"}},"默认http",-1))]),_:1}),l(s,{prop:"enableH2c",label:"HTTP/2"},{default:o(()=>[l(b,{modelValue:t(p).enableH2c,"onUpdate:modelValue":e[3]||(e[3]=a=>t(p).enableH2c=a),class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"]),e[14]||(e[14]=f("span",{color:"gray",style:{"font-size":"12px","margin-left":"12px"}},"代理连接后端Alist时启用h2c（需要Alist也开启enable_h2c）",-1))]),_:1}),l(s,{prop:"proxyH2c",label:"代理H2C"},{default:o(()=>[l(b,{modelValue:t(p).proxyH2c,"onUpdate:modelValue":e[4]||(e[4]=a=>t(p).proxyH2c=a),class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"]),e[15]||(e[15]=f("span",{color:"gray",style:{"font-size":"12px","margin-left":"12px"}},"客户端连接代理时启用h2c（播放器/浏览器需支持）",-1))]),_:1}),l(s,{label:"密码设置"},{default:o(()=>[l(c,{type:"success",onClick:H},{default:o(()=>[...e[16]||(e[16]=[r("添加",-1)])]),_:1})]),_:1}),(V(!0),x(J,null,K(t(p).passwdList,(a,P)=>(V(),x("div",{key:a.id},[r(" 配置 "+w(P+1)+" ",1),l(s,{label:"算法"},{default:o(()=>[l(N,{modelValue:a.encType,"onUpdate:modelValue":u=>a.encType=u,style:{margin:"0px 5px"},size:"small"},{default:o(()=>[l(y,{label:"aesctr",border:""},{default:o(()=>[...e[17]||(e[17]=[r("AES-CTR",-1)])]),_:1}),l(y,{label:"rc4",border:""},{default:o(()=>[...e[18]||(e[18]=[r("RC4",-1)])]),_:1}),l(y,{label:"chacha20",border:""},{default:o(()=>[...e[19]||(e[19]=[r("ChaCha20",-1)])]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"]),e[20]||(e[20]=r(" 开启 ",-1)),l(b,{modelValue:a.enable,"onUpdate:modelValue":u=>a.enable=u,class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue","onUpdate:modelValue"]),l(c,{type:"danger",style:{margin:"0px 20px"},icon:t(Q),circle:"",onClick:u=>F(P)},null,8,["icon","onClick"])]),_:2},1024),l(s,{label:"密码"},{default:o(()=>[l(m,{modelValue:a.password,"onUpdate:modelValue":u=>a.password=u,style:{"max-width":"260px","margin-right":"10px"},placeholder:"12341234"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(s,{label:"文件名"},{default:o(()=>[e[21]||(e[21]=r(" 加密 ",-1)),l(b,{modelValue:a.encName,"onUpdate:modelValue":u=>a.encName=u,class:"ml-2",style:{"margin-right":"10px","--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(s,{label:"备注"},{default:o(()=>[l(m,{modelValue:a.describe,"onUpdate:modelValue":u=>a.describe=u,style:{"max-width":"260px","margin-right":"10px"},placeholder:"备注描述"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(s,{label:"路径"},{default:o(()=>[l(m,{modelValue:a.encPath,"onUpdate:modelValue":u=>a.encPath=u,style:{"max-width":"350px","margin-right":"10px"},placeholder:"多个目录用逗号，隔开"},null,8,["modelValue","onUpdate:modelValue"]),e[22]||(e[22]=f("span",{color:"gray",style:{"font-size":"13px","margin-left":"12px"}},"example: encrypt/*",-1))]),_:2},1024),l(s,{label:"子密码:"},{default:o(()=>[e[24]||(e[24]=r(" 根据文件夹的名字自动识别文件夹的秘钥 ",-1)),l(c,{type:"success",size:"small",style:{"margin-left":"10px"},onClick:u=>R(a)},{default:o(()=>[...e[23]||(e[23]=[r("获取",-1)])]),_:1},8,["onClick"])]),_:2},1024),e[25]||(e[25]=f("br",null,null,-1))]))),128)),l(s,null,{default:o(()=>[l(c,{type:"primary",onClick:A},{default:o(()=>[...e[26]||(e[26]=[r("保存",-1)])]),_:1})]),_:1}),l(L,{modelValue:C.value,"onUpdate:modelValue":e[10]||(e[10]=a=>C.value=a),title:"获取文件夹密文",style:{"min-width":"320px"}},{default:o(()=>[l(q,{modelValue:_.value,"onUpdate:modelValue":e[9]||(e[9]=a=>_.value=a),class:"demo-tabs",onTabClick:n.handleClick},{default:o(()=>[l(U,{label:"加密名字",name:"encode"},{default:o(()=>[l(v,{model:t(d)},{default:o(()=>[l(s,{prop:"username",label:"文件夹名称"},{default:o(()=>[l(m,{modelValue:t(d).folderName,"onUpdate:modelValue":e[5]||(e[5]=a=>t(d).folderName=a),style:{"max-width":"260px"},placeholder:"folder name"},null,8,["modelValue"])]),_:1}),l(s,{prop:"username",label:"算法类型"},{default:o(()=>[l(N,{modelValue:t(d).folderEncType,"onUpdate:modelValue":e[6]||(e[6]=a=>t(d).folderEncType=a),style:{margin:"0 15px"},size:"small"},{default:o(()=>[l(y,{label:"aesctr",border:""},{default:o(()=>[...e[27]||(e[27]=[r("AES-CTR",-1)])]),_:1}),l(y,{label:"rc4",border:""},{default:o(()=>[...e[28]||(e[28]=[r("RC4",-1)])]),_:1}),l(y,{label:"chacha20",border:""},{default:o(()=>[...e[29]||(e[29]=[r("ChaCha20",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(s,{prop:"username",label:"文件夹密码"},{default:o(()=>[l(m,{modelValue:t(d).folderPasswd,"onUpdate:modelValue":e[7]||(e[7]=a=>t(d).folderPasswd=a),style:{"max-width":"260px"},placeholder:"123456"},null,8,["modelValue"])]),_:1}),l(s,{prop:"username",label:"加密结果"},{default:o(()=>[r(w(t(d).folderNameEnc),1)]),_:1}),l(c,{type:"success",onClick:S},{default:o(()=>[...e[30]||(e[30]=[r("查询",-1)])]),_:1})]),_:1},8,["model"])]),_:1}),l(U,{label:"解密名字",name:"decode"},{default:o(()=>[l(v,{model:t(d)},{default:o(()=>[l(s,{prop:"username",label:"文件夹名称"},{default:o(()=>[l(m,{modelValue:t(d).folderNameEnc,"onUpdate:modelValue":e[8]||(e[8]=a=>t(d).folderNameEnc=a),style:{"max-width":"260px"},placeholder:"folder name"},null,8,["modelValue"])]),_:1}),l(s,{prop:"username",label:"算法类型"},{default:o(()=>[r(w(t(d).folderEncType),1)]),_:1}),l(s,{prop:"username",label:"文件夹密码"},{default:o(()=>[r(w(t(d).folderPasswd),1)]),_:1}),l(c,{type:"success",onClick:z},{default:o(()=>[...e[31]||(e[31]=[r("解密",-1)])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue","onTabClick"])]),_:1},8,["modelValue"])]),_:1},8,["label-position","model"])])}}});export{re as default};
