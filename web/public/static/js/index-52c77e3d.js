import{_ as M,e as x,f as O,u as P,w as Q,a as E,r as c,g as k,h as K,c as t,i as u,j as o,t as b,k as r,l as U,m as z,n as D,b as I,d as q,p as C,q as i,s as A,v as G,x as H,y as J}from"./index-30e50fb9.js";const W={class:"login-container columnCC"},X={class:"title-container"},Y={class:"title text-center"},Z={class:"rowSC"},$={class:"svg-container"},ee={class:"rowSC flex-1"},se={class:"svg-container"},oe={class:"tip-message"},te=q({}),ne=Object.assign(te,{__name:"index",setup(ae){const{settings:V}=x(),d=O().formRules,a=C({username:"admin",password:""}),m=C({otherQuery:{},redirect:void 0}),N=P(),B=e=>Object.keys(e).reduce((s,n)=>(n!=="redirect"&&(s[n]=e[n]),s),{});Q(()=>N.query,e=>{e&&(m.redirect=e.redirect,m.otherQuery=B(e))},{immediate:!0});let _=i(!1),f=i("");const w=i(null),g=()=>{w.validate(e=>{_=!0,e&&S()})},L=E(),R=x(),S=()=>{H(a).then(({data:e})=>{J("登录成功"),R.setToken(e==null?void 0:e.jwtToken),L.push("/")}).catch(e=>{f=e==null?void 0:e.msg}).finally(()=>{_=!1})},l=i("password"),v=i(null),T=()=>{l.value==="password"?l.value="":l.value="password",A(()=>{v.value.focus()})};return(e,s)=>{const n=G,y=c("el-input"),h=c("el-form-item"),j=c("el-button"),F=c("el-form");return k(),K("div",W,[t(F,{ref_key:"refLoginForm",ref:w,class:"login-form",model:a,rules:r(d)},{default:u(()=>[o("div",X,[o("h3",Y,b(r(V).title),1)]),t(h,{prop:"username",rules:r(d).isNotNull("usename不能为空")},{default:u(()=>[o("div",Z,[o("span",$,[t(n,{"icon-class":"user"})]),t(y,{modelValue:a.username,"onUpdate:modelValue":s[0]||(s[0]=p=>a.username=p),placeholder:"用户名(admin)"},null,8,["modelValue"]),s[2]||(s[2]=o("div",{class:"show-pwd"},null,-1))])]),_:1},8,["rules"]),t(h,{prop:"password",rules:r(d).isNotNull("密码不能为空")},{default:u(()=>[o("div",ee,[o("span",se,[t(n,{"icon-class":"password"})]),(k(),U(y,{key:l.value,ref_key:"refPassword",ref:v,modelValue:a.password,"onUpdate:modelValue":s[1]||(s[1]=p=>a.password=p),type:l.value,name:"password",placeholder:"password",onKeyup:z(g,["enter"])},null,8,["modelValue","type"])),o("span",{class:"show-pwd",onClick:T},[t(n,{"icon-class":l.value==="password"?"eye":"eye-open"},null,8,["icon-class"])])])]),_:1},8,["rules"]),o("div",oe,b(r(f)),1),t(j,{loading:r(_),type:"primary",class:"login-btn",size:"default",onClick:D(g,["prevent"])},{default:u(()=>[...s[3]||(s[3]=[I(" Login ",-1)])]),_:1},8,["loading"])]),_:1},8,["model","rules"])])}}}),re=M(ne,[["__scopeId","data-v-a55147ab"]]);export{re as default};
