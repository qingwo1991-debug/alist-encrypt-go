import{H as E,r as m,g as v,h as x,j as s,c as a,i as o,k as d,b as i,J as U,K as h,L as H,l as O,t as V,d as S,q as F,p as k,Q as P,R as A,S as D,T as I,P as J,U as K}from"./index-8063b7cb.js";const Q={class:"scroll-y"},G={class:"scroll-y"},X={class:"dialog-footer"},Y={class:"card-header",style:{height:"35px"}},Z={style:{"margin-top":"10px"}},ee={class:"dark"},le={style:{clear:"both"}},ae=S({}),se=Object.assign(ae,{__name:"index",setup(oe){const f=F(!1),w=k([]),t=k({}),C={name:"webdav",path:"/webdav/*",describe:"webdav服务",serverHost:"192.168.1.100",serverPort:"5244",https:!1,enable:!0,passwdList:[{id:Math.random(),password:"123456",encType:"aesctr",enable:!1,encName:!1,encSuffix:"",describe:"my video",encPath:"/aliyun/encrypt/*"}]};Object.assign(t,C),$ref();const L=()=>{t.passwdList.push({id:Math.random(),password:"123456",encType:"aesctr",enable:!0,describe:"my video",encPath:"/dav/encrypt/*"})},T=n=>{t.passwdList.splice(n,1)},W=n=>{f.value=!0,Object.assign(t,n)},R=()=>{f.value=!0,Object.assign(t,C)},$=async n=>{const e=await P(n);f.value=!1,g(e)},M=async()=>{let n=null;t.id?n=await P(t):n=await A(t),f.value=!1,g(n)},N=async n=>{D.confirm("Are you sure to delete?").then(async()=>{const e=await I({id:n});g(e),f.value=!1,J(e.msg)})},g=async n=>{const e=n||await K();w.splice(0,w.length),e.data.forEach(p=>{const r=p.passwdList;for(const b of r)b.id=Math.random();w.push(p)})};return E(async()=>{g()}),(n,e)=>{const p=m("el-input"),r=m("el-form-item"),b=m("el-switch"),c=m("el-button"),_=m("el-radio"),j=m("el-radio-group"),q=m("el-form"),z=m("el-dialog"),B=m("el-card");return v(),x("div",Q,[e[22]||(e[22]=s("h3",null,"Webdav服务配置",-1)),e[23]||(e[23]=s("br",null,null,-1)),a(z,{modelValue:f.value,"onUpdate:modelValue":e[7]||(e[7]=l=>f.value=l),title:"配置信息",style:{"min-width":"320px"}},{default:o(()=>[s("div",G,[a(q,{model:d(t)},{default:o(()=>[a(r,{prop:"username",label:"服务名称"},{default:o(()=>[a(p,{modelValue:d(t).name,"onUpdate:modelValue":e[0]||(e[0]=l=>d(t).name=l),style:{"max-width":"260px"},placeholder:"127.0.0.1"},null,8,["modelValue"])]),_:1}),a(r,{prop:"username",label:"服务器"},{default:o(()=>[a(p,{modelValue:d(t).serverHost,"onUpdate:modelValue":e[1]||(e[1]=l=>d(t).serverHost=l),style:{"max-width":"260px"},placeholder:"127.0.0.1"},null,8,["modelValue"])]),_:1}),a(r,{prop:"password",label:"端口"},{default:o(()=>[a(p,{modelValue:d(t).serverPort,"onUpdate:modelValue":e[2]||(e[2]=l=>d(t).serverPort=l),style:{"max-width":"260px"},placeholder:"5244"},null,8,["modelValue"])]),_:1}),a(r,{prop:"password",label:"主目录"},{default:o(()=>[a(p,{modelValue:d(t).path,"onUpdate:modelValue":e[3]||(e[3]=l=>d(t).path=l),style:{"max-width":"260px"},placeholder:"5244"},null,8,["modelValue"]),e[8]||(e[8]=s("span",{color:"gray",style:{"font-size":"12px","margin-left":"12px"}},"修改后重启生效",-1))]),_:1}),a(r,{prop:"enable",label:"开启"},{default:o(()=>[a(b,{modelValue:d(t).enable,"onUpdate:modelValue":e[4]||(e[4]=l=>d(t).enable=l),class:"ml-2",style:{"margin-bottom":"5px","--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"])]),_:1}),a(r,{label:"密码设置"},{default:o(()=>[a(c,{type:"success",onClick:L},{default:o(()=>[...e[9]||(e[9]=[i("添加",-1)])]),_:1})]),_:1}),(v(!0),x(U,null,h(d(t).passwdList,(l,y)=>(v(),x("div",{key:l.id},[a(j,{modelValue:l.encType,"onUpdate:modelValue":u=>l.encType=u,style:{margin:"0 25px"},size:"small"},{default:o(()=>[a(_,{label:"rc4",border:""},{default:o(()=>[...e[10]||(e[10]=[i("RC4",-1)])]),_:1}),a(_,{label:"aesctr",border:""},{default:o(()=>[...e[11]||(e[11]=[i("AES-CTR(新)",-1)])]),_:1}),a(_,{label:"chacha20",border:""},{default:o(()=>[...e[12]||(e[12]=[i("ChaCha20",-1)])]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"]),e[14]||(e[14]=i(" 开启 ",-1)),a(b,{modelValue:l.enable,"onUpdate:modelValue":u=>l.enable=u,class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue","onUpdate:modelValue"]),a(c,{type:"danger",style:{margin:"5px 20px"},icon:d(H),circle:"",onClick:u=>T(y)},null,8,["icon","onClick"]),a(r,{label:"密码"},{default:o(()=>[a(p,{modelValue:l.password,"onUpdate:modelValue":u=>l.password=u,style:{"max-width":"260px","margin-right":"10px"},placeholder:"12341234"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(r,{label:"文件名"},{default:o(()=>[e[13]||(e[13]=i(" 加密 ",-1)),a(b,{modelValue:l.encName,"onUpdate:modelValue":u=>l.encName=u,class:"ml-2",style:{"margin-right":"10px","--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(r,{label:"备注"},{default:o(()=>[a(p,{modelValue:l.describe,"onUpdate:modelValue":u=>l.describe=u,style:{"max-width":"260px","margin-right":"10px"},placeholder:"备注描述"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(r,{label:"路径"},{default:o(()=>[a(p,{modelValue:l.encPath,"onUpdate:modelValue":u=>l.encPath=u,style:{"max-width":"350px","margin-right":"10px"},placeholder:"多个路径逗号，隔开"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]))),128))]),_:1},8,["model"]),s("span",X,[a(c,{onClick:e[5]||(e[5]=l=>f.value=!1)},{default:o(()=>[...e[15]||(e[15]=[i("取消",-1)])]),_:1}),a(c,{type:"primary",onClick:e[6]||(e[6]=l=>M())},{default:o(()=>[...e[16]||(e[16]=[i("保存",-1)])]),_:1})])])]),_:1},8,["modelValue"]),s("div",null,[(v(!0),x(U,null,h(d(w),l=>(v(),O(B,{key:l.id,style:{width:"250px",margin:"10px",float:"left"},class:""},{default:o(()=>[s("div",Y,[a(b,{modelValue:l.enable,"onUpdate:modelValue":y=>l.enable=y,onClick:y=>$(l),class:"ml-2",style:{float:"right","--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue","onUpdate:modelValue","onClick"]),s("span",Z,V(l.name),1)]),s("div",ee,"服务: "+V(l.serverHost),1),s("div",null,"端口: "+V(l.serverPort),1),s("div",null,"路径: "+V(l.path),1),s("div",null,"描述: "+V(l.describe),1),e[19]||(e[19]=s("br",null,null,-1)),a(c,{type:"danger",size:"small",onClick:y=>N(l.id)},{default:o(()=>[...e[17]||(e[17]=[i("删除",-1)])]),_:1},8,["onClick"]),a(c,{type:"primary",size:"small",onClick:y=>W(l)},{default:o(()=>[...e[18]||(e[18]=[i("编辑",-1)])]),_:1},8,["onClick"])]),_:2},1024))),128))]),s("div",le,[a(c,{type:"success",onClick:R},{default:o(()=>[...e[20]||(e[20]=[i("添加配置",-1)])]),_:1}),e[21]||(e[21]=s("span",{color:"gray",style:{"font-size":"12px","margin-left":"12px"}},"新增后重启生效",-1))])])}}});export{se as default};
