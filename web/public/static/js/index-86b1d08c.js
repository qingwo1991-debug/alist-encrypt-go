import{_ as M,e as h,f as O,u as P,w as Q,a as $,r as i,g as x,h as E,c as t,i as c,j as o,t as k,k as r,l as K,m as U,n as z,b as D,d as I,p as b,q as C,s as q,v as A,x as G,y as H}from"./index-7455abb7.js";const J={class:"login-container columnCC"},W={class:"title-container"},X={class:"title text-center"},Y={class:"rowSC"},Z={class:"svg-container"},ee={class:"rowSC flex-1"},se={class:"svg-container"},oe={class:"tip-message"},te=I({}),ne=Object.assign(te,{__name:"index",setup(le){const{settings:V}=h(),u=O().formRules,l=b({username:"admin",password:""}),p=b({otherQuery:{},redirect:void 0}),N=P(),B=e=>Object.keys(e).reduce((s,n)=>(n!=="redirect"&&(s[n]=e[n]),s),{});Q(()=>N.query,e=>{e&&(p.redirect=e.redirect,p.otherQuery=B(e))},{immediate:!0});let d=$ref(!1),m=$ref("");const f=$ref(null),w=()=>{f.validate(e=>{d=!0,e&&S()})},L=$(),R=h(),S=()=>{G(l).then(({data:e})=>{H("登录成功"),R.setToken(e==null?void 0:e.jwtToken),L.push("/")}).catch(e=>{m=e==null?void 0:e.msg}).finally(()=>{d=!1})},a=C("password"),g=C(null),T=()=>{a.value==="password"?a.value="":a.value="password",q(()=>{g.value.focus()})};return(e,s)=>{const n=A,v=i("el-input"),y=i("el-form-item"),j=i("el-button"),F=i("el-form");return x(),E("div",J,[t(F,{ref_key:"refLoginForm",ref:f,class:"login-form",model:l,rules:r(u)},{default:c(()=>[o("div",W,[o("h3",X,k(r(V).title),1)]),t(y,{prop:"username",rules:r(u).isNotNull("usename不能为空")},{default:c(()=>[o("div",Y,[o("span",Z,[t(n,{"icon-class":"user"})]),t(v,{modelValue:l.username,"onUpdate:modelValue":s[0]||(s[0]=_=>l.username=_),placeholder:"用户名(admin)"},null,8,["modelValue"]),s[2]||(s[2]=o("div",{class:"show-pwd"},null,-1))])]),_:1},8,["rules"]),t(y,{prop:"password",rules:r(u).isNotNull("密码不能为空")},{default:c(()=>[o("div",ee,[o("span",se,[t(n,{"icon-class":"password"})]),(x(),K(v,{key:a.value,ref_key:"refPassword",ref:g,modelValue:l.password,"onUpdate:modelValue":s[1]||(s[1]=_=>l.password=_),type:a.value,name:"password",placeholder:"password",onKeyup:U(w,["enter"])},null,8,["modelValue","type"])),o("span",{class:"show-pwd",onClick:T},[t(n,{"icon-class":a.value==="password"?"eye":"eye-open"},null,8,["icon-class"])])])]),_:1},8,["rules"]),o("div",oe,k(r(m)),1),t(j,{loading:r(d),type:"primary",class:"login-btn",size:"default",onClick:z(w,["prevent"])},{default:c(()=>[...s[3]||(s[3]=[D(" Login ",-1)])]),_:1},8,["loading"])]),_:1},8,["model","rules"])])}}}),re=M(ne,[["__scopeId","data-v-0a8c6b36"]]);export{re as default};
